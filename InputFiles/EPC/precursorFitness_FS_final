type timeDependentPhysicsPackage;

pop     400; //500
timeSteps   1000;
XSdata   ce;
dataType ce;
timeIncrement 1e-4;
cycles 5; //5
buffer 50000; //100000

combing 1;
precursors 1;
useForcedPrecursorDecay 1;
criticalWgtNorm 1;
outputFormat asciiJSON;


EPC {useEPC 1; fitnessHandling 1; responseType 1; responseDim cells; response 2; fittestFactor 0.3; nReproductions 4;}

collisionOperator { neutronCE {type neutronCEkineticimp; minEnergy 1.0e-11; maxEnergy 20; precursors 1; branchless 0;}} //precursors 1;

transportOperator { type transportOperatorKineticDT; //currently will only support this
}


source {
  type pointSource;
  r (-15.0 0 0);
  particle neutron;
  E 1e-6;
}


tally  {

  flux_cell { type collisionClerk;
    map { type multiMap; maps (map1 map2);
    map1 { type cellMap; cells (1 2);}
    map2 { type timeMap; grid lin; min 0.0; max 1000e-4; N 1000;}
    }
    response (flux); flux {type fluxResponse;}
  }

  }

geometry {
    type geometryStd;
    boundary (0 0 0 0 0 0);
    graph {type shrunk;}

    surfaces
    {
      universeBox { type box; id 1; origin (0.0 0.0 0.0); halfwidth (10.0e1 10.0e1 10.0e1); }

      boronBox { type box; id 2; origin (0.0 0.0 0.0); halfwidth (0.5e1 10.0e1 10.0e1); }

      hydrogenBoxOne { type box; id 3; origin (-5.25e1 0.0 0.0); halfwidth (4.75e1 10.0e1 10.0e1); }

      hydrogenBoxTwo { type box; id 4; origin (5.25e1 0.0 0.0); halfwidth (4.75e1 10.0e1 10.0e1); }
    } 

    cells
    {
    cellHydrogenOne { id 1; type simpleCell; surfaces (-3 2); filltype mat; material m1;} 
    cellHydrogenTwo { id 2; type simpleCell; surfaces (-4 2); filltype mat; material m1;}
    cellBoron { id 3; type simpleCell; surfaces (-2); filltype mat; material boron;}
    }

    universes
    {

      root{id 1; type rootUniverse; border 1; fill u<2>;}
      geom { id 2; type cellUniverse; cells ( 1 2 3);}

    }
}

viz {
  myVTK {
    type vtk;
    corner (-10.71 -10.71 -0.5);
    width (21.42 21.42 1.0);
    vox (700 700 1);
  }
  bmp {
    type bmp;
    output img;
    what material;
    centre (0.0 0.0 0.0);
    //width (25.0 25.0);
    axis z;
    res (500 500);
  }
}

nuclearData {
  handles {
    ce { type aceNeutronDatabase; aceLibrary $SCONE_ACE;}}
  materials {

    m1 {
      temp 12345;
      composition {


      //1001.03    5.1E-02;
      1001.03    6.700E-002;
      8016.03    3.350E-002;
      92235.03   2.5E-5; 
      }
      }


    // Boron
    boron {
      temp 293;
      composition {
        5010.03 0.01; //0.06
        }
    }

}

}
